<template>
  <header>
    <!--Bootstrap nav bar  toggle  -->
    <div id="nav__bg-color">
      <nav
        class="navbar sticky-top navbar-expand-lg navbar-dark nav-bar-container"
      >
        <router-link to="/home" class="navbar-brand">ShopCart</router-link>
        <button
          class="navbar-toggler collapsed"
          type="button"
          data-toggle="collapse"
          data-target="#navbarTogglerDemo02"
          aria-controls="navbarTogglerDemo02"
          aria-expanded="false"
          aria-label="Toggle navigation"
          id="Navbar-toggler"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse Form-content" id="navbarTogglerDemo02">
          <!-- :class="{ 'is-active': showMenu }" -->
          <div id="form-Disp">
            <form class="d-flex my-2 my-lg-0">
              <div class="search-bar">
                <i class="uil uil-search search-api"></i>
                <input
                  type="search"
                  placeholder="Search for anything"
                  id="feed-search"
                  v-model="searchQuerry"
                />
              </div>
              <div>
                <button
                  class="btn btn-outline-success my-2 my-sm-0"
                  id="btn__override"
                  type="submit"
                  @click.prevent="getQuery"
                >
                  Search
                </button>
              </div>
            </form>
          </div>
          <div class="d-flex ms-auto">
            <ul class="navbar-nav align-center">
              <li class="nav-item active">
                <router-link to="/home" class="nav-link home-bbtn"
                  >Home <span class="sr-only">(current)</span></router-link
                >
              </li>
              <li class="nav-item">
                <router-link to="/addproduct" class="nav-link"
                  >Add Product</router-link
                >
              </li>
              <li class="nav-item">
                <router-link to="/catagories" class="nav-link cat-bbtn"
                  >Catagories</router-link
                >
              </li>
              <li class="d-flex">
                <span
                  class="nav-link"
                  role="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <i
                    class="fa-solid fa-cart-shopping cart-anker"
                    @click="toCart"
                  >
                    <strong class="cart-count">{{ getLength }}</strong>
                  </i>
                </span>

                <!-- <div class="nav-buttons"></div> -->

                <!-- </router-link> -->
              </li>
              <li class="ms-1">
                <!-- <router-link> -->
                <div class="collapse navbar-collapse" id="navbar-list-4">
                  <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                      <a
                        class="nav-link dropdown-toggle"
                        id="navbarDropdownMenuLink"
                        role="button"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        <img
                          src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg"
                          width="40"
                          height="40"
                          class="rounded-circle"
                        />
                      </a>
                      <div
                        class="dropdown-menu"
                        aria-labelledby="navbarDropdownMenuLink"
                      >
                        <button class="dropdown-item" @click="checkAuth">
                          Login
                        </button>
                        <button class="dropdown-item" href="#">Log Out</button>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </header>
</template>
  <script>
export default {
  data() {
    return {
      searchQuerry: null,
      length: null,
    };
  },

  computed: {
    getLength() {
      this.length = this.$store.state.Cart.cartLength;
      console.log(
        'ðŸš€ ~ file: TheHeader.vue:142 ~ getLength ~ this.length',
        this.length
      );

      return this.length;
    },
  },
  // computed: {
  //   getStore() {
  //     console.log(this.$store.state.cart.items.quantity, 'im store');
  //     return this.$store.state.cart.items.quantity;
  //   },
  // },

  // created() {
  //   window.addEventListener('resize', this.CheckDisplay);
  //   console.log(this.length);
  // },
  // destroyed() {
  //   window.removeEventListener('resize', this.CheckDisplay);
  // },

  methods: {
    toCart() {
      this.$router.push({
        path: '/cart',
      });
    },
    getQuery() {
      this.$router.push({
        name: 'SearchPage',
        params: { qr: this.searchQuerry },
      });
    },
    // showMe() {
    //   this.showMenu = !this.showMenu;
    //   this.showMobileMenu = !this.showMobileMenu;
    //   console.log(screen.width);
    // },
    // CheckDisplay() {
    //   console.log(this.showMenu);
    //   if (screen.width > 991) {
    //     this.showMobileMenu = false;
    //     console.log(screen.width, this.showMobileMenu);
    //   }
    // },
    checkAuth() {
      const Token = localStorage.getItem('token');
      if (Token != null) {
        alert('you are already signned in');
      } else {
        this.$router.replace('/login');
      }
    },
  },
};
</script>
  <style scoped>
header {
  box-shadow: 0 8px 8px -4px black;
}
#btn__override {
  background-color: #1e3161;
  color: whitesmoke;
}
#btn__override:hover {
  background-color: #68aaaa;
}

#nav__bg-color {
  background-color: #1e3161;
}
.is-active {
  display: none;
}
.nav-bar-container {
  width: 80%;
  margin: 0 auto;
}
.search-bar input[type='search']::placeholder {
  color: gray;
}

input[type='search'] {
  background: transparent;
  width: 15vw;
  color: var(--color-dark);
  margin-left: 1rem;
  font-size: 0.9rem;
  outline: 0;
  border: none;
}
.navbar-dark .search-bar {
  background: hsl(252, 30%, 95%);
  border-radius: 2rem;
  padding: 0.4rem;
}

.d-flex {
  gap: 1rem;
}
.cart-anker {
  position: relative;
}
.cart-count {
  background: red;
  color: white;
  border-radius: 0.8rem;
  font-size: 0.7rem;
  width: -moz-fit-content;
  width: fit-content;
  padding: 0.1rem 0.4rem;
  position: absolute;
  top: -0.5rem;
  right: -01rem;
}
.Form-content {
  display: flex;
  justify-content: space-between;
  margin-left: 1rem;
}
a {
  text-decoration: none;
}

@media only screen and (max-width: 650px) {
  #form-Disp {
    display: none;
  }
}
@media only screen and (min-width: 990) {
  .is-active {
    display: block;
  }
}
</style>